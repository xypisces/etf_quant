## MODIFIED Requirements

### Requirement: 轮动池标的展示与指标计算
计算动量排名前，系统必须自动检查目标标的的本地行情数据是否覆盖到最新交易日。若数据不是最新的，系统必须先通过增量更新拉取缺失的行情数据，再执行动量计算。用户可通过下拉筛选框选择特定标的进行计算，不选则默认对全量 ETF 计算。

#### Scenario: 使用下拉筛选器选择标的计算
- **WHEN** 用户在下拉多选框中选择了若干 ETF 标的并点击"计算动量排名"
- **THEN** 系统仅对选中的标的进行增量数据更新和动量排名计算，展示排名结果

#### Scenario: 未选择标的时默认全量计算
- **WHEN** 用户未在下拉筛选器中选择任何标的并点击"计算动量排名"
- **THEN** 系统对全量 A 股 ETF 列表进行增量数据更新和动量排名计算

#### Scenario: 计算前自动增量更新过期数据
- **WHEN** 用户点击"计算动量排名"且目标标的（选中或全量）中某个 ETF 的本地行情数据最后日期早于最近交易日
- **THEN** 系统先对该 ETF 执行增量数据下载并更新本地存储，然后使用更新后的数据计算动量得分

#### Scenario: 数据已是最新时跳过更新
- **WHEN** 目标标的中某个 ETF 的本地行情数据已覆盖到最近交易日
- **THEN** 系统直接使用本地数据计算动量得分，不发起网络请求

## ADDED Requirements

### Requirement: 重新计算 Top50 排名
系统必须提供一个"重新计算 Top50"按钮，基于上次缓存的排名前 50 名标的代码，快速重新执行增量数据更新和动量计算，并更新排名及缓存。

#### Scenario: 基于缓存 Top50 重新计算
- **WHEN** 用户点击"重新计算 Top50"按钮且本地存在排名缓存
- **THEN** 系统读取缓存中的前 50 名标的代码，对这些标的执行增量数据更新和动量重算，展示新排名并更新缓存

#### Scenario: 无缓存时禁用按钮
- **WHEN** 本地不存在排名缓存文件
- **THEN** "重新计算 Top50"按钮处于禁用状态，提示用户先执行一次完整计算
